import{a as w,r as n,u as S,j as e,H as z,b as E}from"./app-B0SzeqCG.js";import{D as C}from"./data-table-CXT7Fsk5.js";import{z as D,a as o,A}from"./app-layout-BnD_lHqo.js";import{d as B}from"./index-B3-rv-gc.js";import{P as K,T as P}from"./trash-2-dNStamk0.js";/* empty css            */import"./button-CWmUjKFj.js";import"./search-BJPjGiVB.js";import"./createLucideIcon-DF5AlWng.js";import"./plus-DrjVaY47.js";import"./index-BAI3dK1t.js";import"./index-DjSeiq0_.js";import"./index-wkndwqac.js";import"./x-Ce74WkcZ.js";import"./floating-ui.react-dom-Cbmwftv2.js";function V({auth:u,rakList:c,lokasiList:x=[],filters:b}){const{flash:d}=w().props,[t,i]=n.useState(null),[h,s]=n.useState(!1),[k,g]=n.useState(b.search||""),l=u.permissions||[],r=S({lokasi_id:"",nama_rak:"",baris:"",kode_rak:""});n.useEffect(()=>{d?.message&&(D.success(d.message),r.reset())},[d]);const p=a=>{a.preventDefault(),t?r.put(`/rak-barang/${t.id}`,{onSuccess:()=>{i(null),s(!1)}}):r.post("/rak-barang",{onSuccess:()=>s(!1)})},f=a=>{r.setData({lokasi_id:a.lokasi.id.toString(),nama_rak:a.nama_rak,baris:a.baris||"",kode_rak:a.kode_rak}),i(a),s(!0)},j=a=>{confirm("Yakin ingin menghapus rak ini?")&&r.delete(`/rak-barang/${a}`)},m=()=>{r.reset(),i(null),s(!1)},N=a=>{g(a),B(()=>{E.get(route("rak-barang.index"),{search:a},{preserveState:!0,replace:!0})},400)()},v=l.includes(o.CREATE_RAK_BARANG),y=l.includes(o.EDIT_RAK_BARANG),_=l.includes(o.DELETE_RAK_BARANG),R=[{header:"Gudang/Lokasi",accessorKey:"lokasi",cell:a=>a.lokasi?.nama},{header:"Nama Rak",accessorKey:"nama_rak"},{header:"Baris",accessorKey:"baris",cell:a=>a.baris||"-"},{header:"Kode Rak",accessorKey:"kode_rak"}];return e.jsx(A,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 dark:bg-zinc-950",children:[e.jsx(z,{title:"Rak Barang"}),e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Data Rak Barang"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Kelola daftar rak barang dan alokasi tempat."})]})}),h&&e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:t?"Edit Rak Barang":"Tambah Rak Baru"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:e.jsx("span",{className:"sr-only",children:"Close"})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-gray-200",children:"Gudang/Lokasi"}),e.jsxs("select",{value:r.data.lokasi_id,onChange:a=>r.setData("lokasi_id",a.target.value),className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Gudang --"}),x.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),r.errors.lokasi_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.errors.lokasi_id})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-gray-200",children:"Nama Rak"}),e.jsx("input",{type:"text",value:r.data.nama_rak,onChange:a=>r.setData("nama_rak",a.target.value),className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",required:!0}),r.errors.nama_rak&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.errors.nama_rak})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-gray-200",children:"Kode Rak"}),e.jsx("input",{type:"text",value:r.data.kode_rak,onChange:a=>r.setData("kode_rak",a.target.value),className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",required:!0}),r.errors.kode_rak&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.errors.kode_rak})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-gray-200",children:"Baris"}),e.jsx("input",{type:"text",value:r.data.baris,onChange:a=>r.setData("baris",a.target.value),className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white"}),r.errors.baris&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.errors.baris})]})]}),e.jsxs("div",{className:"flex items-end gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:r.processing,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-50",children:t?"Simpan Perubahan":"Simpan Rak"}),e.jsx("button",{type:"button",onClick:m,className:"rounded-md border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-gray-50 hover:text-slate-900",children:"Batal"})]})]})]}),e.jsx(C,{data:c.data,columns:R,links:c.links,searchPlaceholder:"Cari rak barang...",onSearch:N,initialSearch:k,onCreate:v?()=>{s(!0),i(null),r.reset()}:void 0,createLabel:"Tambah Rak",actionWidth:"w-[100px]",actions:a=>e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[y&&e.jsx("button",{onClick:()=>f(a),className:"group hover:bg-opacity-100 rounded-full p-2 text-blue-600 transition-all hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20",title:"Edit",children:e.jsx(K,{size:16})}),_&&e.jsx("button",{onClick:()=>j(a.id),className:"group hover:bg-opacity-100 rounded-full p-2 text-red-600 transition-all hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",title:"Hapus",children:e.jsx(P,{size:16})})]})})]})]})})}export{V as default};
