import{a as T,r as t,u as I,j as e,L as K,b as x}from"./app-CqDem4Iv.js";import{a as m,A as M}from"./app-layout-CO-j32QL.js";import B from"./BarangKembaliDetail-BmSOcQ9R.js";import{A as L,T as R}from"./train-front-tunnel-ClRU32x3.js";import{E as F}from"./eye-CTdvgAF3.js";/* empty css            */import"./button-D25-2m8W.js";import"./index-B3PMF5vv.js";import"./index-D3xMyuYw.js";import"./index-DQS2yhzL.js";import"./x-skuTRX_H.js";import"./createLucideIcon-nI3AvfOo.js";import"./floating-ui.react-dom-BcAq-xRk.js";function Y(){const{auth:n,filters:l,barangKembali:o,kategoriOptions:b,lokasiOptions:j}=T().props,d=n.permissions||[],[f,g]=t.useState(!1),[N,h]=t.useState(null),[u,v]=t.useState(!1),k=a=>{h(a),g(!0)},y=()=>{g(!1),h(null)},_=a=>{x.get(`/barang-kembali/${a}/edit`)},c=t.useRef(!0),{data:s,setData:r}=I({tanggal:l?.tanggal||"",kategori_id:l?.kategori_id||"",lokasi_id:l?.lokasi_id||"",search:l?.search||"",sort:l?.sort||"terbaru",per_page:l?.per_page||10});function p(){x.get(route("barang-kembali.index"),s,{preserveState:!0,preserveScroll:!0,replace:!0})}function w(){x.get(route("barang-kembali.index"))}const A=t.useMemo(()=>s.search!==""||s.tanggal!==""||s.kategori_id!==""||s.lokasi_id!==""||s.sort!=="terbaru"||String(s.per_page)!=="10",[s]);t.useEffect(()=>{if(c.current){c.current=!1;return}const a=setTimeout(()=>p(),500);return()=>clearTimeout(a)},[s.search]),t.useEffect(()=>{c.current||p()},[s.tanggal,s.kategori_id,s.lokasi_id,s.sort,s.per_page]);const E=d.includes(m.CREATE_BARANG_KEMBALI);return d.includes(m.EDIT_BARANG_KEMBALI),d.includes(m.DELETE_BARANG_KEMBALI),e.jsxs(M,{children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col justify-between gap-4 sm:flex-row sm:items-center sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Barang Kembali"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Daftar barang yang kembali ke inventori"})]}),E&&e.jsxs(K,{href:"/barang-kembali/create",className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2.5 text-sm font-medium text-white transition-colors hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:outline-none",children:[e.jsx(D,{className:"h-4 w-4"}),"Tambah Barang Kembali"]})]}),e.jsxs("div",{className:"mb-4 rounded border bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Pencarian"}),e.jsx("input",{type:"text",value:s.search||"",onChange:a=>r("search",a.target.value),className:"w-full rounded border p-1.5 text-xs",placeholder:"Cari serial/merek/model..."})]}),e.jsxs("div",{className:"flex h-max items-center gap-2 self-end",children:[A&&e.jsxs("button",{onClick:w,className:"flex items-center gap-2 rounded border p-1.5 text-xs text-red-600 hover:bg-gray-50",children:[e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{children:"Reset"})]}),e.jsxs("button",{onClick:()=>v(!u),className:"flex items-center gap-2 rounded border p-1.5 text-xs hover:bg-gray-50",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsx("span",{children:"Filter"})]})]})]}),u&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 border-t pt-4 sm:grid-cols-2 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Tanggal"}),e.jsx("input",{type:"date",value:s.tanggal,onChange:a=>r("tanggal",a.target.value),className:"w-full rounded border p-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Kategori"}),e.jsxs("select",{value:s.kategori_id,onChange:a=>r("kategori_id",a.target.value),className:"w-full rounded border p-1.5 text-xs",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),b.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Lokasi Asal"}),e.jsxs("select",{value:s.lokasi_id,onChange:a=>r("lokasi_id",a.target.value),className:"w-full rounded border p-1.5 text-xs",children:[e.jsx("option",{value:"",children:"Semua Lokasi"}),j.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Urutkan"}),e.jsxs("select",{value:s.sort,onChange:a=>r("sort",a.target.value),className:"w-full rounded border p-1.5 text-xs",children:[e.jsx("option",{value:"terbaru",children:"Terbaru"}),e.jsx("option",{value:"terlama",children:"Terlama"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Item per Halaman"}),e.jsxs("select",{value:s.per_page,onChange:a=>r("per_page",a.target.value),className:"w-full rounded border p-1.5 text-xs",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:"all",children:"Semua"})]})]})]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"No"}),e.jsx("th",{className:"p-2 text-left",children:"Tanggal"}),e.jsx("th",{className:"p-2 text-left",children:"Merek/Model"}),e.jsx("th",{className:"p-2 text-left",children:"Kategori"}),e.jsx("th",{className:"p-2 text-left",children:"Asal Lokasi"}),e.jsx("th",{className:"p-2 text-left",children:"Kondisi"}),e.jsx("th",{className:"p-2 text-right",children:"Aksi"})]})}),e.jsx("tbody",{children:o.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Tidak ada data barang kembali."})}):o.data.map((a,C)=>{const S=o.from+C,i=a.details&&a.details.length>0?a.details[0]:null;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2",children:S}),e.jsx("td",{className:"p-2",children:a.tanggal}),e.jsxs("td",{className:"p-2",children:[e.jsxs("span",{children:[i?.barang?.model_barang?.merek?.nama||""," ",i?.barang?.model_barang?.nama||"(Tidak ada barang)"]}),a.details.length>1&&e.jsxs("span",{className:"ml-2 text-[10px] text-gray-500 italic",children:["(+",a.details.length-1," lainnya)"]})]}),e.jsx("td",{className:"p-2",children:i?.barang?.model_barang?.kategori?.nama||"-"}),e.jsx("td",{className:"p-2",children:a.lokasi?.nama||"-"}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${i?.status_saat_kembali==="bagus"?"bg-green-100 text-green-800":i?.status_saat_kembali==="rusak"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:i?.status_saat_kembali||"-"})}),e.jsx("td",{className:"p-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("button",{onClick:()=>k(a),className:"flex items-center gap-1 text-indigo-600 hover:text-indigo-900",children:[e.jsx(F,{className:"h-3 w-3"}),"Detail"]}),e.jsx("button",{onClick:()=>_(a.id),className:"flex items-center gap-1 text-yellow-600 hover:text-yellow-900 disabled:cursor-not-allowed disabled:opacity-50",children:"Edit"})]})})]},a.id)})})]})})})]}),e.jsx(B,{show:f,onClose:y,barangKembali:N})]})}function D(n){return e.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}export{Y as default};
