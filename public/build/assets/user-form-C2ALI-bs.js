import{a as v,r as N,u as w,j as e}from"./app-B0SzeqCG.js";import{A as C}from"./app-layout-BnD_lHqo.js";import{c as z}from"./createLucideIcon-DF5AlWng.js";import{E as L}from"./eye-Byhmq46G.js";import{C as P}from"./check-BmLcH4zp.js";import{X as M}from"./x-Ce74WkcZ.js";/* empty css            */import"./button-CWmUjKFj.js";import"./index-BAI3dK1t.js";import"./index-DjSeiq0_.js";import"./index-wkndwqac.js";import"./floating-ui.react-dom-Cbmwftv2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],B=z("EyeOff",S);function O(){const{user:n,roles:u,permissions:m,userRoles:h,userPermissions:p}=v().props,o=!!n,[c,b]=N.useState(!1),{data:s,setData:d,post:y,put:j,processing:x,errors:t}=w({name:n?.name||"",email:n?.email||"",password:"",password_confirmation:"",roles:h||[],permissions:p||[]}),k=r=>{r.preventDefault(),o?j(route("users.update",n.id),{preserveScroll:!0}):y(route("users.store"))},g=(r,l)=>{const i=s[r];i.includes(l)?d(r,i.filter(a=>a!==l)):d(r,[...i,l])},f=(r,l)=>{const i=m[r].map(a=>a.name);l?d("permissions",[...new Set([...s.permissions,...i])]):d("permissions",s.permissions.filter(a=>!i.includes(a)))};return e.jsx(C,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:o?"Edit Pengguna":"Buat Pengguna Baru"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:o?"Perbarui detail dan izin pengguna":"Tambahkan pengguna baru ke sistem"})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("form",{onSubmit:k,className:"divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 dark:text-white",children:"Informasi Dasar"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Nama Lengkap ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s.name,onChange:r=>d("name",r.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 transition duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",placeholder:"Riki Fauzia"}),e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 transform",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),t.name&&e.jsxs("p",{className:"mt-1 flex items-center text-sm text-red-600 dark:text-red-400",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:s.email,onChange:r=>d("email",r.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 transition duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",placeholder:"user@example.com"}),e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 transform",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]}),t.email&&e.jsxs("p",{className:"mt-1 flex items-center text-sm text-red-600 dark:text-red-400",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t.email]})]})]})]}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 dark:text-white",children:"Kata Sandi"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o?"Leave blank to keep current password":"Set the initial password for this user"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Kata Sandi ",!o&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:s.password,onChange:r=>d("password",r.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 transition duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:()=>b(!c),className:"absolute top-1/2 right-3 -translate-y-1/2 transform cursor-pointer text-gray-400 hover:text-gray-600 dark:hover:text-gray-200","aria-label":"Toggle password visibility",children:c?e.jsx(B,{className:"h-5 w-5"}):e.jsx(L,{className:"h-5 w-5"})})]}),t.password&&e.jsxs("p",{className:"mt-1 flex items-center text-sm text-red-600 dark:text-red-400",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t.password]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Konfirmasi Kata Sandi ",!o&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:s.password_confirmation,onChange:r=>d("password_confirmation",r.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 transition duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",placeholder:"••••••••"}),e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 transform",children:s.password_confirmation&&(s.password===s.password_confirmation?e.jsx(P,{className:"h-5 w-5 text-green-500"}):e.jsx(M,{className:"h-5 w-5 text-red-500"}))})]})]})]})]}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 dark:text-white",children:"Peran & Izin"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Peran"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:u.map(r=>e.jsxs("label",{className:`flex cursor-pointer items-start rounded-xl border p-3 transition-all duration-200 ${s.roles.includes(r)?"border-blue-500 bg-blue-50/50 dark:border-blue-700 dark:bg-blue-900/20":"border-gray-200 hover:border-blue-300 dark:border-gray-700 dark:hover:border-blue-600"}`,children:[e.jsx("input",{type:"checkbox",checked:s.roles.includes(r),onChange:()=>g("roles",r),className:"mt-1 h-4 w-4 flex-shrink-0 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:r})})]},r))}),t.roles&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t.roles})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Izin Langsung"}),Object.keys(m).map(r=>{const l=m[r],i=l.every(a=>s.permissions.includes(a.name));return e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3 dark:border-gray-700",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:r}),e.jsxs("label",{className:"flex cursor-pointer items-center text-sm font-medium",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",checked:i,onChange:a=>f(r,a.target.checked)}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Pilih Semua"})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:l.map(a=>e.jsxs("label",{className:`flex cursor-pointer items-start rounded-xl border p-3 transition-all duration-200 ${s.permissions.includes(a.name)?"border-blue-500 bg-blue-50/50 dark:border-blue-700 dark:bg-blue-900/20":"border-gray-200 hover:border-blue-300 dark:border-gray-700 dark:hover:border-blue-600"}`,children:[e.jsx("input",{type:"checkbox",checked:s.permissions.includes(a.name),onChange:()=>g("permissions",a.name),className:"mt-1 h-4 w-4 flex-shrink-0 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:a.name})})]},a.id))})]},r)}),t.permissions&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t.permissions})]})]})]}),e.jsx("div",{className:"flex justify-end border-t border-gray-200 bg-gray-50 px-6 py-4 dark:border-gray-700 dark:bg-gray-700/50",children:e.jsx("button",{type:"submit",disabled:x,className:`rounded-lg px-6 py-2.5 font-medium transition-all duration-200 ${x?"cursor-not-allowed bg-blue-400":"bg-blue-600 shadow-sm hover:bg-blue-700 hover:shadow-md"} flex items-center text-white`,children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"mr-2 -ml-1 h-4 w-4 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsx(e.Fragment,{children:o?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Update User"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create User"]})})})})]})})]})})}export{O as default};
