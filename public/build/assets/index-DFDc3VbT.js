import{a as z,r as d,u as R,j as e,H as S,b as E}from"./app-CqDem4Iv.js";import{z as A,a as o,A as C}from"./app-layout-CO-j32QL.js";import{d as B}from"./index-CUfBkIjc.js";import{P as D,T}from"./trash-2-DD657aPo.js";/* empty css            */import"./button-D25-2m8W.js";import"./index-B3PMF5vv.js";import"./index-D3xMyuYw.js";import"./index-DQS2yhzL.js";import"./x-skuTRX_H.js";import"./createLucideIcon-nI3AvfOo.js";import"./floating-ui.react-dom-BcAq-xRk.js";const P=[{title:"Rak Barang",href:"/rak-barang"}];function J({auth:m,rakList:u,lokasiList:g=[],filters:p}){const{flash:i}=z().props,[s,n]=d.useState(null),[l,r]=d.useState(!1),[h,k]=d.useState(p.search||""),c=m.permissions||[],t=R({lokasi_id:"",nama_rak:"",baris:"",kode_rak:""});d.useEffect(()=>{i?.message&&(A.success(i.message),t.reset())},[i]);const b=a=>{a.preventDefault(),s?t.put(`/rak-barang/${s.id}`,{onSuccess:()=>{n(null),r(!1)}}):t.post("/rak-barang",{onSuccess:()=>r(!1)})},y=a=>{t.setData({lokasi_id:a.lokasi.id.toString(),nama_rak:a.nama_rak,baris:a.baris||"",kode_rak:a.kode_rak}),n(a),r(!0)},j=a=>{confirm("Yakin ingin menghapus rak ini?")&&t.delete(`/rak-barang/${a}`)},x=()=>{t.reset(),n(null),r(!1)},f=a=>{k(a),B(()=>{E.get(route("lokasi.index"),{search:a},{preserveState:!0,replace:!0})},400)()},N=c.includes(o.CREATE_RAK_BARANG),v=c.includes(o.EDIT_RAK_BARANG),w=c.includes(o.DELETE_RAK_BARANG);return e.jsx(C,{breadcrumbs:P,children:e.jsxs("div",{className:"bg-gray-50 p-4 sm:p-6 dark:bg-zinc-950",children:[e.jsx(S,{title:"Rak Barang"}),e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Data Rak Barang"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Cari kategori...",value:h,onChange:a=>f(a.target.value),className:"rounded-md border-gray-300 bg-white p-2 text-sm dark:border-zinc-700 dark:bg-zinc-800 dark:text-white"}),N&&e.jsx("button",{onClick:()=>l?x():r(!0),className:"rounded-md bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:l?"Tutup Form":" + Tambah Rak"})]})]}),l&&e.jsxs("div",{className:"mb-6 rounded-lg bg-white p-6 shadow dark:bg-zinc-900",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold dark:text-white",children:s?"Edit Rak Barang":"Tambah Rak Baru"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium dark:text-gray-200",children:"Gudang/Lokasi"}),e.jsxs("select",{value:t.data.lokasi_id,onChange:a=>t.setData("lokasi_id",a.target.value),className:"w-full rounded-md border border-gray-300 p-2 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Gudang --"}),g.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}),t.errors.lokasi_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.lokasi_id})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium dark:text-gray-200",children:"Nama Rak"}),e.jsx("input",{type:"text",value:t.data.nama_rak,onChange:a=>t.setData("nama_rak",a.target.value),className:"w-full rounded-md border border-gray-300 p-2 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",required:!0}),t.errors.nama_rak&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.nama_rak})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium dark:text-gray-200",children:"Kode Rak"}),e.jsx("input",{type:"text",value:t.data.kode_rak,onChange:a=>t.setData("kode_rak",a.target.value),className:"w-full rounded-md border border-gray-300 p-2 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",required:!0}),t.errors.kode_rak&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.kode_rak})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium dark:text-gray-200",children:"Baris"}),e.jsx("input",{type:"text",value:t.data.baris,onChange:a=>t.setData("baris",a.target.value),className:"w-full rounded-md border border-gray-300 p-2 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white"}),t.errors.baris&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.errors.baris})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"submit",disabled:t.processing,className:"rounded-md bg-green-600 px-4 py-2 text-white hover:bg-green-700 disabled:opacity-50",children:s?"Update":"Simpan"}),e.jsx("button",{type:"button",onClick:x,className:"rounded-md bg-gray-500 px-4 py-2 text-white hover:bg-gray-600",children:"Batal"})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 bg-white dark:border-zinc-800 dark:bg-zinc-900",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-zinc-800",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-zinc-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Nama Rak"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Baris"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Kode Rak"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:u.data.map((a,_)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-800",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:_+1}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.nama_rak}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.baris||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.kode_rak}),e.jsxs("td",{className:"flex gap-3 px-6 py-4 text-sm whitespace-nowrap",children:[v&&e.jsx("button",{onClick:()=>y(a),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400",children:e.jsx(D,{size:18})}),w&&e.jsx("button",{onClick:()=>j(a.id),className:"text-red-600 hover:text-red-800 dark:text-red-400",children:e.jsx(T,{size:18})})]})]},a.id))})]})})]})]})})}export{J as default};
