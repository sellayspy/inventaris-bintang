import{r as o,u as v,j as a,H as N,b as x}from"./app-B0SzeqCG.js";import{D as S}from"./data-table-CXT7Fsk5.js";import{z as w,A as z}from"./app-layout-BnD_lHqo.js";import{l as L}from"./lodash-1DSuanu8.js";import{P as C,T as D}from"./trash-2-dNStamk0.js";/* empty css            */import"./button-CWmUjKFj.js";import"./index-B3-rv-gc.js";import"./search-BJPjGiVB.js";import"./createLucideIcon-DF5AlWng.js";import"./plus-DrjVaY47.js";import"./index-BAI3dK1t.js";import"./index-DjSeiq0_.js";import"./index-wkndwqac.js";import"./x-Ce74WkcZ.js";import"./floating-ui.react-dom-Cbmwftv2.js";function Y({subLokasi:d,lokasiList:c,filters:i,flash:n}){const[r,l]=o.useState(null),[b,s]=o.useState(!1),[u,h]=o.useState(i.search||""),t=v({lokasi_id:"",nama:"",kode:"",lantai:"",keterangan:""});o.useEffect(()=>{n?.message&&(w.success(n.message),t.reset(),l(null),s(!1))},[n?.message]);const g=e=>{e.preventDefault(),r?t.put(`/sub-lokasi/${r.id}`,{onSuccess:()=>s(!1)}):t.post("/sub-lokasi",{onSuccess:()=>s(!1)})},p=e=>{t.setData({lokasi_id:e.lokasi.id.toString(),nama:e.nama,kode:e.kode||"",lantai:e.lantai||"",keterangan:e.keterangan||""}),l(e),s(!0)},k=e=>{confirm("Yakin ingin menghapus sub-lokasi ini?")&&t.delete(`/sub-lokasi/${e}`)},m=()=>{t.reset(),l(null),s(!1)},f=e=>{h(e),L.debounce(()=>{x.get(route("sub-lokasi.index"),{search:e,lokasi_id:i.lokasi_id},{preserveState:!0,replace:!0})},400)()},j=e=>{x.get(route("sub-lokasi.index"),{search:u,lokasi_id:e},{preserveState:!0,replace:!0})},y=[{header:"Lokasi",accessorKey:"lokasi",cell:e=>e.lokasi?.nama},{header:"Sub-Lokasi",accessorKey:"nama"},{header:"Kode",accessorKey:"kode",cell:e=>e.kode||"-"},{header:"Lantai",accessorKey:"lantai",cell:e=>e.lantai||"-"}];return a.jsx(z,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 dark:bg-zinc-950",children:[a.jsx(N,{title:"Sub-Lokasi"}),a.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[a.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Sub-Lokasi"}),a.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Kelola lokasi spesifik seperti ruangan, lantai, atau unit."})]})}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("select",{value:i.lokasi_id||"",onChange:e=>j(e.target.value),className:"rounded-md border-gray-200 text-sm shadow-sm dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[a.jsx("option",{value:"",children:"Semua Lokasi"}),c.map(e=>a.jsx("option",{value:e.id,children:e.nama},e.id))]})}),b&&a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-zinc-700 dark:bg-zinc-900",children:[a.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r?"Edit Sub-Lokasi":"Tambah Sub-Lokasi Baru"}),a.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:a.jsx("span",{className:"sr-only",children:"Close"})})]}),a.jsxs("form",{onSubmit:g,className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300",children:"Lokasi *"}),a.jsxs("select",{value:t.data.lokasi_id,onChange:e=>t.setData("lokasi_id",e.target.value),className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-600 dark:bg-zinc-800 dark:text-white",required:!0,children:[a.jsx("option",{value:"",children:"Pilih Lokasi"}),c.map(e=>a.jsx("option",{value:e.id,children:e.nama},e.id))]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300",children:"Nama Sub-Lokasi *"}),a.jsx("input",{type:"text",value:t.data.nama,onChange:e=>t.setData("nama",e.target.value),placeholder:"Contoh: Pendaftaran, Poli A",className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-600 dark:bg-zinc-800 dark:text-white",required:!0})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300",children:"Kode"}),a.jsx("input",{type:"text",value:t.data.kode,onChange:e=>t.setData("kode",e.target.value),placeholder:"Contoh: REG, POLI-A",className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-600 dark:bg-zinc-800 dark:text-white"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300",children:"Lantai"}),a.jsx("input",{type:"text",value:t.data.lantai,onChange:e=>t.setData("lantai",e.target.value),placeholder:"Contoh: 1, 2, B1",className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-600 dark:bg-zinc-800 dark:text-white"})]}),a.jsxs("div",{className:"space-y-1 sm:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300",children:"Keterangan"}),a.jsx("input",{type:"text",value:t.data.keterangan,onChange:e=>t.setData("keterangan",e.target.value),placeholder:"Keterangan tambahan...",className:"w-full rounded-md border border-gray-200 p-2.5 text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-zinc-600 dark:bg-zinc-800 dark:text-white"})]}),a.jsxs("div",{className:"flex items-end gap-3 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"submit",disabled:t.processing,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-50",children:r?"Simpan Perubahan":"Simpan Sub-Lokasi"}),a.jsx("button",{type:"button",onClick:m,className:"rounded-md border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-gray-50 hover:text-slate-900",children:"Batal"})]})]})]}),a.jsx(S,{data:d.data,columns:y,links:d.links,searchPlaceholder:"Cari sub-lokasi...",onSearch:f,initialSearch:u,onCreate:()=>{s(!0),l(null),t.reset()},createLabel:"Tambah Sub-Lokasi",actionWidth:"w-[100px]",actions:e=>a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>p(e),className:"group hover:bg-opacity-100 rounded-full p-2 text-blue-600 transition-all hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20",title:"Edit",children:a.jsx(C,{size:16})}),a.jsx("button",{onClick:()=>k(e.id),className:"group hover:bg-opacity-100 rounded-full p-2 text-red-600 transition-all hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",title:"Hapus",children:a.jsx(D,{size:16})})]})})]})]})})}export{Y as default};
