import{a as E,r,u as K,j as e,L as M,b as x}from"./app-B0SzeqCG.js";import{a as m,A as I}from"./app-layout-BnD_lHqo.js";import R from"./BarangKeluarDetail-646zMe48.js";import B from"./aksi-dropdown-BXJ-iH7g.js";import{c as L}from"./createLucideIcon-DF5AlWng.js";import{A as F,T as D}from"./train-front-tunnel-CZja1tri.js";/* empty css            */import"./button-CWmUjKFj.js";import"./index-BAI3dK1t.js";import"./index-DjSeiq0_.js";import"./index-wkndwqac.js";import"./x-Ce74WkcZ.js";import"./floating-ui.react-dom-Cbmwftv2.js";import"./sweetalert2.esm.all-BrPZ0DEU.js";import"./menu-CKSXYzvt.js";import"./use-server-handoff-complete-BY7v8c0H.js";import"./with-selector-C4nMbqOd.js";import"./transition-BkwKwpEa.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],P=L("CirclePlus",O);function ne(){const{auth:j,filters:l,barangKeluar:t,kategoriOptions:b,lokasiOptions:U}=E().props,[f,u]=r.useState(!1),[N,g]=r.useState(null),[h,v]=r.useState(!1),y=a=>{g(a),u(!0)},k=()=>{u(!1),g(null)},c=j.permissions||[],o=r.useRef(!0),{data:s,setData:n}=K({tanggal:l?.tanggal||"",kategori_id:l?.kategori_id||"",lokasi_id:l?.lokasi_id||"",search:l?.search||"",sort:l?.sort||"terbaru",per_page:l?.per_page||10});function p(){x.get(route("barang-keluar.index"),s,{preserveState:!0,preserveScroll:!0,replace:!0})}function _(){x.get(route("barang-keluar.index"),{},{preserveScroll:!0,replace:!0})}const w=r.useMemo(()=>s.search!==""||s.tanggal!==""||s.kategori_id!==""||s.lokasi_id!==""||s.sort!=="terbaru"||String(s.per_page)!=="10",[s]);r.useEffect(()=>{if(o.current){o.current=!1;return}const a=setTimeout(()=>{p()},500);return()=>clearTimeout(a)},[s.search]),r.useEffect(()=>{o.current||p()},[s.tanggal,s.kategori_id,s.lokasi_id,s.sort,s.per_page]);const A=c.includes(m.CREATE_BARANG_KELUAR),S=c.includes(m.EDIT_BARANG_KELUAR),T=c.includes(m.DELETE_BARANG_KELUAR);return e.jsxs(I,{children:[e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4 flex flex-col justify-between gap-3 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Barang Keluar"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Daftar barang yang keluar dari inventori"})]}),A&&e.jsxs(M,{href:"/barang-keluar/create",className:"flex items-center gap-1 rounded bg-green-600 px-3 py-1.5 text-xs text-white hover:bg-green-700",children:[e.jsx(P,{className:"h-3 w-3"}),e.jsx("span",{children:"Tambah Barang Keluar"})]})]}),e.jsxs("div",{className:"mb-4 rounded border bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Pencarian"}),e.jsx("input",{type:"text",value:s.search||"",onChange:a=>n("search",a.target.value),className:"w-full rounded border p-1.5 text-xs",placeholder:"Cari serial/merek/model..."})]}),e.jsxs("div",{className:"flex h-max items-center gap-2 self-end",children:[w&&e.jsxs("button",{onClick:_,className:"flex items-center gap-2 rounded border p-1.5 text-xs text-red-600 hover:bg-gray-50",children:[e.jsx(F,{className:"h-3 w-3"}),e.jsx("span",{children:"Reset"})]}),e.jsxs("button",{onClick:()=>v(!h),className:"flex items-center gap-2 rounded border p-1.5 text-xs hover:bg-gray-50",children:[e.jsx(D,{className:"h-3 w-3"}),e.jsx("span",{children:"Filter"})]})]})]}),h&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 border-t pt-4 sm:grid-cols-2 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Tanggal"}),e.jsx("input",{type:"date",value:s.tanggal,onChange:a=>n("tanggal",a.target.value),className:"w-full rounded border p-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Kategori"}),e.jsxs("select",{value:s.kategori_id,onChange:a=>n("kategori_id",a.target.value),className:"w-full rounded border p-1.5 text-xs",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),b.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Urutkan"}),e.jsxs("select",{value:s.sort,onChange:a=>n("sort",a.target.value),className:"w-full rounded border p-1.5 text-xs",children:[e.jsx("option",{value:"terbaru",children:"Terbaru"}),e.jsx("option",{value:"terlama",children:"Terlama"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-gray-600",children:"Item per Halaman"}),e.jsxs("select",{value:s.per_page,onChange:a=>n("per_page",a.target.value),className:"w-full rounded border p-1.5 text-xs",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:"all",children:"Semua"})]})]})]})]}),e.jsxs("div",{className:"overflow-hidden rounded border bg-white",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"No"}),e.jsx("th",{className:"p-2 text-left",children:"Tanggal"}),e.jsx("th",{className:"p-2 text-left",children:"Merek/Model"}),e.jsx("th",{className:"p-2 text-left",children:"Kategori"}),e.jsx("th",{className:"p-2 text-left",children:"Tujuan"}),e.jsx("th",{className:"p-2 text-right",children:"Aksi"})]})}),e.jsx("tbody",{children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-center"})}):t.data.map((a,i)=>{const C=t.from+i,d=a.details[0];return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-2",children:C}),e.jsx("td",{className:"p-2",children:a.tanggal}),e.jsxs("td",{className:"p-2",children:[e.jsxs("span",{children:[d?.barang?.model_barang?.merek?.nama||""," ",d?.barang?.model_barang?.nama||"(Tidak ada barang)"]}),a.details.length>1&&e.jsxs("span",{className:"ml-2 text-[10px] text-gray-500 italic",children:["(+",a.details.length-1," lainnya)"]})]}),e.jsx("td",{className:"p-2",children:d?.barang?.model_barang?.kategori?.nama||"-"}),e.jsx("td",{className:"p-2",children:a.lokasi?.nama||"-"}),e.jsx("td",{className:"p-2 text-right",children:e.jsx(B,{transaksi:a,handleOpenModal:y,can:{edit:S,delete:T}})})]},a.id)})})]})}),t.links&&t.links.length>1&&e.jsx("div",{className:"border-t px-3 py-2",children:e.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 sm:flex-row",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Menampilkan ",t.from,"-",t.to," dari ",t.total]}),e.jsx("div",{className:"flex",children:t.links.map((a,i)=>e.jsx("button",{disabled:!a.url,onClick:()=>a.url&&x.get(a.url),className:`px-2 py-1 text-xs ${a.active?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"} ${i===0?"rounded-l":""} ${i===t.links.length-1?"rounded-r":""}`,dangerouslySetInnerHTML:{__html:a.label}},i))})]})})]})]}),e.jsx(R,{show:f,onClose:k,barangKeluar:N})]})}export{ne as default};
